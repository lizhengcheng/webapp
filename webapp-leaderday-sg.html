<!DOCTYPE html>
<html>

<head lang="en">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=0,minimal-ui">
  <title>信息门户</title>
  <link rel="stylesheet" href="template/css/template.style.ios.min.css" />
  <link rel="stylesheet" href="template/css/template.webapp-style.min.css" />
</head>

<body class="grey-bg">
<!-- 右侧弹出栏 -->
  <div class="panel panel-right panel-right2 panel-cover">
    <div class="content-block content-block-lead">
      <h3>领导列表</h3>
      <ul class="edit-radio">
        <li class="">
          <span class="edit-radio-l">全部领导</span>
        </li>
        <li class="">
          <span class="edit-radio-l"><img src="images/user3.png">李明</span>
        </li>
        <li class="">
          <span class="edit-radio-l"><img src="images/user3.png">李明</span>
        </li>
        <li class="">
          <span class="edit-radio-l"><img src="images/user3.png">李明</span>
        </li>
      </ul>
    </div>
  </div>
<!-- 右侧弹出栏 -->
  <div class="views">
    <div class="view">
      <div class="pages">
        <div class="page" data-page="page-webapp-leaderdat">
          <!-- 日 -->
          <section class="section-info wh-section show wh-section-bottomfixed pull-to-refresh-content pull-to-refresh-no-navbar">
            <div class="pull-to-refresh-layer">
              <div class="preloader"></div>
              <div class="pull-to-refresh-arrow"></div>
            </div>
            <div class="lead-head">
              <div><img src="images/user3.png"></div>
              <div>
                <span>全部领导</span>
              </div>
              <div>
                <a href="#" data-panel="right" class="open-panel">按领导查看></a>
              </div>
            </div>
            <ul class="webapp-leader-table">
               <!-- <li>
                 <div class="day-fl">
                   <span class="webapp-lead-time">09:35</span>
                   <span class="webapp-lead-date">2016-08-16</span>
                   <img src="images/bj1.png">
                 </div>
                 <div class="day-fr">
                   <div class="leader-content">
                     <p class="leader-content-a">哈哈哈哈哈哈哈哈</p>
                   </div>
                 </div>
                 <div style="clear: both;"></div>
               </li>
               <li>
                 <div class="day-fl">
                   <span class="webapp-lead-time">09:35</span>
                   <span class="webapp-lead-date">2016-08-16</span>
                   <img src="images/bj2.png">
                 </div>
                 <div class="day-fr">
                     <div class="leader-content">
                      <p class="leader-content-b">哈哈哈哈哈哈哈哈</p>
                      <p class="leader-content-c">
                        <i class="fa fa-paperclip"></i>
                        <a href="#">
                          <strong class="atta-name">会议资料.doc</strong>
                        </a>
                      </p>
                     </div>
                 </div>
                 <div style="clear: both;"></div>
               </li> -->
            <!-- 下面这个li是本日无安排时的界面效果 -->
               <li>
                 <div class="day-fl">
                   <span class="webapp-lead-time">09:35</span>
                   <span class="webapp-lead-date">2016-08-16</span>
                   <img src="images/bj2.png">
                 </div>
                 <div class="day-fr">
                   <div class="leader-content leader-content2">
                    <p class="leader-content-c">
                      2016-08-16
                    </p>
                  </div>
                 </div>
               </li> 
            <!-- 上面这个li是本日无安排时的界面效果 -->
            </ul>
            <!-- <aside class="wh-load-box" style="display: block">
              <div class="wh-load-tap">上滑加载更多</div>
              <div class="wh-load-md">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
              </div>
            </aside> -->
            <!-- 下面是点击添加日程的目前注释隐藏 -->
            <div class="add-noleader">
              <p>本日无安排</p>
              <a href="###">+点击添加</a>
            </div>
          </section>
          <!-- 周 channel-view-->
          <section class="section-info wh-section wh-section-bottomfixed">
            <div class="webapp-leader-week">
              <span class="date1" id="date1"></span><span>至</span><span class="date2" id="date2"></span>
              <a onclick="previousWeek();" href="###" class="left-i"><i class="fa fa-angle-left"></i></a>
              <a onclick="nextWeek();" href="###" class="right-i"><i class="fa fa-angle-right"></i></a>
            </div>
            <div class="leader-day">
                <div class="">
                  <ul>
                    <li class="">
                        <div class="webapp-leader-day">
                          <span class="">2016-08-16 周四</span>
                        </div>
                        <div class="webapp-leader-day2">
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        </div>
                    </li>
                    <li class="">
                        <div class="webapp-leader-day">
                          <span class="">2016-08-16 周四</span>
                        </div>
                        <div class="webapp-leader-day3">
                        <a href="###" class="add-leaderday">无日程安排 点击添加</a>
                        </div>
                    </li>
                    <li class="">
                        <div class="webapp-leader-day">
                          <span class="">2016-08-16 周四</span>
                        </div>
                        <div class="webapp-leader-day2">
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        </div>
                        <div class="webapp-leader-detail">
                          <a href="##"><span>展开余下</span><i class="fa fa-angle-down"></i></a>
                          <a href="##"><span>展开余下</span><i class="fa fa-angle-up"></i></a>
                        </div>
                    </li>
                    <li class="">
                        <div class="webapp-leader-day">
                          <span class="">2016-08-16 周四</span>
                        </div>
                        <div class="webapp-leader-day2">
                        <p>
                          <span class="time">13:41</span>
                          <span>后哈哈哈哈吼吼吼哈哈哈</span>
                        </p>
                        <p>
                          <span class="time">13:41</span>
                          <span>后哈哈哈哈吼吼吼哈哈哈</span>
                        </p>
                        </div>
                    </li>
                  </ul>
                </div>
              </div>
          </section>
          <!--   push-->
          <section class="section-info wh-section wh-section-bottomfixed">
            <header id="searchBar" class="wh-search">
              <div class="wh-container">
                <div class="wh-search-input">
                  <form method="post" data-search-list=".list-container" data-search-in=".item-title" class="searchbar searchbar-init nomal-searchbar">
                    <label class="fa fa-search" for="search"></label>
                    <input id="searchTitleR" type="search" class="nomal-search" onfocus="showReceive();" placeholder="请输入日程内容查询" />
                    <i id="rch" class="fa fa-times-circle-o" style="display:block;" onclick="removeSearchInputR()"></i>
                  </form>
                </div>
              </div>
            </header>
            <div class="leader-timepick clearfix">
               <div class="fl">
                 <input class="edit-ipt-r edit-ipt-arrow" id="picker-date" type="text" name="scroller" placeholder="开始时间：" />
                 <span class="document-span">&#xf03a;</span>
               </div>
               <div class="fr">
                <input class="edit-ipt-r edit-ipt-arrow" id="picker-date" type="text" name="scroller" placeholder="结束时间：" />
                 <span class="document-span" style="left: -40px;">——</span>
               </div>
            </div>
            <!-- 日期控件 -->
            <div class="content-block">
              <div style="padding:0; margin-right:-15px; width:auto" class="content-block-inner">
                <div id="calendar-inline-container"></div>
              </div>
            </div>     
            <!-- 日期控件 -->
            <div class="leader-day">
                <div class="">
                  <ul>
                    
                    <li class="">
                        <!-- <div class="webapp-leader-day">
                          <span class="">2016-08-16 周四</span>
                        </div> -->
                        <div class="webapp-leader-day2">
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        </div>
                    </li>
                    <li class="">
                        <div class="webapp-leader-day">
                          <span class="">2016-08-16 周四</span>
                        </div>
                        <div class="webapp-leader-day3">
                        <a href="###" class="add-leaderday">无日程安排 点击添加</a>
                        </div>
                    </li>
                    <li class="">
                        <div class="webapp-leader-day">
                          <span class="">2016-08-16 周四</span>
                        </div>
                        <div class="webapp-leader-day2">
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        <p><span class="time">13:41</span><span>后哈哈哈哈吼吼吼哈哈哈</span></p>
                        </div>
                        <div class="webapp-leader-detail">
                          <a href="##"><span>展开余下</span><i class="fa fa-angle-down"></i></a>
                        </div>
                    </li>
                    <li class="">
                        <div class="webapp-leader-day">
                          <span class="">2016-08-16 周四</span>
                        </div>
                        <div class="webapp-leader-day2">
                        <p>
                          <span class="time">13:41</span>
                          <span>后哈哈哈哈吼吼吼哈哈哈</span>
                        </p>
                        <p>
                          <span class="time">13:41</span>
                          <span>后哈哈哈哈吼吼吼哈哈哈</span>
                        </p>
                        </div>
                    </li>
                  </ul>
                </div>
              </div>
          </section>
          <footer class="wh-footer wh-footer-forum">
            <div class="wh-wrapper">
              <div class="wh-container">
                <div class="footer-info wh-footer-btn row no-gutter">
                  <a href="##" class="fbtn-matter col-33">
                    <div><i class="fa fa-received-tas"></i></div><span>日</span></a>
                  <a href="##" class=" fbtn-cancle col-33">
                    <div><i class="fa fa-step-over"></i></div><span>周</span></a>
                  <a href="##" class=" fbtn-cancle col-33">
                    <div><i class="fa fa-calendar"></i></div><span>月</span></a>
                </div>
              </div>
            </div>
          </footer>
          <a href="###" class="leader-day-tianjia"><i class="fa fa-plus"></i></a>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="template/js/template.min.js"></script>
  <script type="text/javascript">
  var myApp = new Framework7();
  var $$ = Dom7;
  // 侧栏单选
  $$("ul.edit-radio li").click(function(){
          if($$(this).hasClass("radio-active")){
              $$(this).removeClass("radio-active");
          }
          else{
             var liList =  $$("ul.edit-radio li");
            $$("ul.edit-radio li").each(function(){
              $$(this).removeClass("radio-active");
            });
              $$(this).addClass("radio-active");
          } 
      })
  // 侧栏单选
  // 侧栏关闭方法
  $$('section').on('click', function (e) {
          myApp.closePanel();
      });
  // 侧栏关闭方法 

  

  var monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August' , 'September' , 'October', 'November', 'December'];
   
  var calendarInline = myApp.calendar({
      container: '#calendar-inline-container',
      value: [new Date()],
      weekHeader: false,
      toolbarTemplate: 
          '<div class="toolbar calendar-custom-toolbar">' +
              '<div class="toolbar-inner">' +
                  '<div class="left">' +
                      '<a href="#" class="link icon-only"><i class="icon fa-angle-left"></i></a>' +
                  '</div>' +
                  '<div class="center"></div>' +
                  '<div class="right">' +
                      '<a href="#" class="link icon-only"><i class="icon fa-angle-right"></i></a>' +
                  '</div>' +
              '</div>' +
          '</div>',
      onOpen: function (p) {
          $$('.calendar-custom-toolbar .center').text(monthNames[p.currentMonth] +', ' + p.currentYear);
          $$('.calendar-custom-toolbar .left .link').on('click', function () {
              calendarInline.prevMonth();
          });
          $$('.calendar-custom-toolbar .right .link').on('click', function () {
              calendarInline.nextMonth();
          });
      },
      onMonthYearChangeStart: function (p) {
          $$('.calendar-custom-toolbar .center').text(monthNames[p.currentMonth] +', ' + p.currentYear);
      }
  });     
  // 下拉刷新页面
  var ptrContent = $$('.pull-to-refresh-content');

  // 添加'refresh'监听器
  ptrContent.on('refresh', function(e) {
    // 模拟2s的加载过程
    setTimeout(function() {
      var title = titles[Math.floor(Math.random() * titles.length)];
      var time = times[Math.floor(Math.random() * times.length)];
      var where = wheres[Math.floor(Math.random() * wheres.length)];
      var click = clicks[Math.floor(Math.random() * clicks.length)];

      // 列表元素的HTML字符串
      var itemHTML = '<div class="webapp-div"><strong>' + title + '<em>通知</em></strong>' + '<p><span>' + time + '</span><em class="skyblue">' + where + '</em><em class="skyblue">' + click + '</em></p></div>';

      // 前插新列表元素
      ptrContent.find('.info-list').prepend(itemHTML);

      // 加载完毕需要重置
      myApp.pullToRefreshDone();
    }, 2000);


    // 清除搜索区域焦点bug
    function removeSearch(schElmID) {
      $$(schElmID).blur().val(""); //主动清除焦点
      $$(schElmID).next('.searchbar-cancel').hide();
    }

    // 搜索焦点时
    $$('#fbtn-save').on('click', function() {
      $$(this).next('.searchbar-cancel').show();
    })
  });

  //swipe图片切换
  var mySwiper_info = myApp.swiper('.mySwiper_info', { 
    pagination:'.mySwiper_info .swiper-pagination',
    spaceBetween: 0 //控制图片拖动是显示的空隙 无空隙为0
  });

  //底部切换
  $$(".footer-info>a").click(function() {
    var _this = $$(this);
    var index = _this.index();

    $$(".footer-info>a").removeClass("fbtn-matter").addClass("fbtn-cancle");
    _this.removeClass("fbtn-cancle").addClass("fbtn-matter");
    $$(".section-info").hide().eq(index).show();

  });

  </script>


  <script>  
var currDT; 
var aryDay = new Array("日","一","二","三","四","五","六");//显示星期  
var lastDay;//页面显示的最后一天
var firstDay;//页面显示的第一天
initDate();
//初始化日期加载
function initDate() {
  currDT = new Date();
  var dw = currDT.getDay();//从Date对象返回一周中的某一天(0~6)
  var tdDT;//日期  
  for(var i=0;i<7;i++) {
    tdDT = getDays()[i];
    dw = tdDT.getDay();//星期几
    if(i==0){
      var m = tdDT.getMonth()+1;
        document.getElementById("date1").innerHTML=tdDT.getFullYear()+"-"+ m + "-" + tdDT.getDate();
    }else if(i==6){
      document.getElementById("date2").innerHTML=tdDT.getFullYear()+"-"+ m + "-" + tdDT.getDate();
    }
  } 
  //重新赋值
  lastDay = getDays()[6];//本周的最后一天
  firstDay = getDays()[0];//本周的第一天
}

//取得当前日期一周内的某一天
function getWeek(i) {
  var now = new Date();
  var n = now.getDay();
  var start = new Date();
  start.setDate(now.getDate() - n + i);//取得一周内的第一天、第二天、第三天...
  return start;
}

//取得当前日期一周内的七天
function getDays() {
  var days = new Array();
  for(var i=1;i<=7;i++) {
    days[i-1] = getWeek(i);
  }
  return days;
}

//取得下一周的日期数(共七天)
function getNextWeekDatas(ndt) {
  var days = new Array();
  for(var i=1;i<=7;i++) {
    var dt = new Date(ndt);
    days[i-1] = getNextWeek(dt,i);
  }
  return days;
}

//指定日期的下一周(后七天)
function getNextWeek(dt,i) {
  var today = dt;
  today.setDate(today.getDate()+i);
  return today;
}


//取得上一周的日期数(共七天)
function getPreviousWeekDatas(ndt) {
  var days = new Array();
  for(var i=-7;i<=-1;i++) {
    var dt = new Date(ndt);
    days[7+i] = getPreviousWeek(dt,i);
  }
  return days;
}
//指定日期的上一周(前七天)
function getPreviousWeek(dt,i) {
  var today = dt;
  today.setDate(today.getDate()+i);
  return today;
}
//下一周
function nextWeek() {
  setCurrDTAfter();//重设时间
 
  var dw = currDT.getDay();//从Date对象返回一周中的某一天(0~6)
  var tdDT;//日期
  
  for(var i=0;i<7;i++) {
    tdDT = getNextWeekDatas(lastDay)[i];
   
    dw = tdDT.getDay();//星期几
   
     if(i==0){
      var m = tdDT.getMonth()+1;
        document.getElementById("date1").innerHTML=tdDT.getFullYear()+"-"+ m + "-" + tdDT.getDate();
    }else if(i==6){
      document.getElementById("date2").innerHTML=tdDT.getFullYear()+"-"+ m + "-" + tdDT.getDate();
    }
  } 
  //重新赋值
  firstDay = getNextWeekDatas(lastDay)[0];//注意赋值顺序1
  lastDay = getNextWeekDatas(lastDay)[6];//注意赋值顺序2
}

//上一周
function previousWeek() {
  settCurrDTBefore();
  
  var dw = currDT.getDay();//从Date对象返回一周中的某一天(0~6)
  var tdDT;//日期

  for(var i=0;i<7;i++) {
    tdDT = getPreviousWeekDatas(firstDay)[i];
   
    dw = tdDT.getDay();//星期几
  
   if(i==0){
      var m = tdDT.getMonth()+1;
        document.getElementById("date1").innerHTML=tdDT.getFullYear()+"-"+ m + "-" + tdDT.getDate();
    }else if(i==6){
      document.getElementById("date2").innerHTML=tdDT.getFullYear()+"-"+ m + "-" + tdDT.getDate();
    }
  } 
  //重新赋值
  lastDay =  getPreviousWeekDatas(firstDay)[6];//注意赋值顺序1
  firstDay = getPreviousWeekDatas(firstDay)[0];//注意赋值顺序2
}

//当前日期后第七天
function setCurrDTAfter() {
  currDT.setDate(currDT.getDate()+7);
}

//当前日期前第七天
function settCurrDTBefore() {
  currDT.setDate(currDT.getDate()-7);
}

    // 下拉刷新页面
    var ptrContent = $$('.pull-to-refresh-content');

    // 添加'refresh'监听器
    ptrContent.on('refresh', function(e) {
      // 模拟2s的加载过程
      setTimeout(function() {

        // 加载完毕需要重置
        myApp.pullToRefreshDone();
      }, 2000);
    });

//日期选择器
var today = new Date();
var pickerDate = myApp.picker({
    input: '#picker-date',
    toolbarTemplate:
        '<div class="toolbar">' +
            '<div class="toolbar-inner">' +
                '<div class="left">' +
                    '<a href="#" class="link reset-picker">重设</a>'+
                '</div>'+
                '<div class="right">' +
                    '<a href="#" class="link close-picker">完成</a>' +
                '</div>' +
            '</div>' +
        '</div>',

    //当触发的时候
    onOpen: function(picker, values, displayValues){
        var todayArr = [today.getFullYear(), today.getMonth(), today.getDate(), today.getHours(), (today.getMinutes() < 10 ? '0' + today.getMinutes() : today.getMinutes())];
        picker.setValue(todayArr);
        picker.container.find('.reset-picker').on('click', function (){
            picker.setValue(todayArr);
        })
    },
    onChange: function (picker, values, displayValues) {
        //获取当前月份的总天数
        var daysInMonth = new Date(picker.value[0], picker.value[1]*1, 0).getDate();
        //如果设置月数大于当前月的总天数，设置天数为总天数
        if (values[2] > daysInMonth) {
            picker.cols[2].setValue(daysInMonth);
        }
    },
    //返回给input的格式，“-” 可以换成“年月日”
    formatValue: function (p, values, displayValues) {
        //return values[0] + '-' + values[1] + '-' + values[2] + ',' + values[3] + ':' + values[4];
        return values[0] + '-' + values[1] + '-' + values[2];
    },
    //返回 value数组
    cols: [
        // 年
        {
            values: (function () {
                var arr = [];
                for (var i = 1990; i <= 2030; i++) { arr.push(i); }
                return arr;
            })(),
        },
        // 月
        {
            values: [1,2,3,4,5,6,7,8,9,10,11,12],
        },
        // 日
        {
            values: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],
        }
    ]
});
</script>
</body>
